import { createSyncRooms } from './sync-rooms'

////////////////////////////////////////////////////////////////////////////////
// mocks
////////////////////////////////////////////////////////////////////////////////
let calls: any[]
const state = {rooms: {room1: 'state1', room2: 'state2'}} as any
const getState = () => state
const syncRoom = (room: any, roomId: string) => calls.push([room, roomId])

////////////////////////////////////////////////////////////////////////////////
// setup
////////////////////////////////////////////////////////////////////////////////
const syncRooms = createSyncRooms(getState, syncRoom)
beforeEach(() => calls = [])

////////////////////////////////////////////////////////////////////////////////
// tests
////////////////////////////////////////////////////////////////////////////////
test('call syncRoom for every room in state', () => {
  syncRooms()
  expect(calls).toEqual([
    ['state1', 'room1'],
    ['state2', 'room2']
  ])
})
