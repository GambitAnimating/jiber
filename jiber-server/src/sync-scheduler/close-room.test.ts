import { createCloseRoom } from './close-room'
import { Action, CLOSE_ROOM } from 'jiber-core'

////////////////////////////////////////////////////////////////////////////////
// mocks
////////////////////////////////////////////////////////////////////////////////
let calls: any[]
const dispatch = (action: Action) => calls.push(action)

////////////////////////////////////////////////////////////////////////////////
// setup
////////////////////////////////////////////////////////////////////////////////
const closeRoom = createCloseRoom(dispatch)
beforeEach(() => calls = [])

////////////////////////////////////////////////////////////////////////////////
// tests
////////////////////////////////////////////////////////////////////////////////
test('dispatch a CLOSE_ROOM action', () => {
  closeRoom('kingdom')
  expect(calls).toEqual([
    {type: CLOSE_ROOM, $roomId: 'kingdom'}
  ])
})
